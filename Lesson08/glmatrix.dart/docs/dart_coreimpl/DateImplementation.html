        <!DOCTYPE html>
        <html>
        <head>
                <meta charset="utf-8">
        <title>Library dart:coreimpl / Class DateImplementation</title>
        <link rel="stylesheet" type="text/css"
            href="../styles.css">
        <link href="http://fonts.googleapis.com/css?family=Open+Sans:400,600,700,800" rel="stylesheet" type="text/css">
        <link rel="shortcut icon" href="../favicon.ico">
        
        </head>
        <body data-library="dart:coreimpl" data-type="DateImplementation">
        <div class="page">
        <div class="header">
          <a href="../index.html"><div class="logo"></div></a>
          <a href="../index.html">Dart Documentation</a>
         &rsaquo; <a href="../dart_coreimpl.html">dart:coreimpl</a> &rsaquo; <a href="../dart_coreimpl/DateImplementation.html">DateImplementation</a></div>
        <div class="nav">
        
<h2><div class="icon-library"></div><a href="../dart_core.html">dart:core</a></h2><h2><div class="icon-library"></div><a href="../dart_coreimpl.html">dart:coreimpl</a></h2><ul class="icon">
<li><a href="../dart_coreimpl/Arrays.html"><div class="icon-class"></div>Arrays</a></li>
<li><a href="../dart_coreimpl/Collections.html"><div class="icon-class"></div>Collections</a></li>
<li><a href="../dart_coreimpl/CompleterImpl.html"><div class="icon-class"></div>CompleterImpl&lt;T&gt;</a></li>
<li><div class="icon-class"></div><strong>DateImplementation</strong></li>
<li><a href="../dart_coreimpl/DoubleLinkedQueue.html"><div class="icon-class"></div>DoubleLinkedQueue&lt;E&gt;</a></li>
<li><a href="../dart_coreimpl/DoubleLinkedQueueEntry.html"><div class="icon-class"></div>DoubleLinkedQueueEntry&lt;E&gt;</a></li>
<li><a href="../dart_coreimpl/DualPivotQuicksort.html"><div class="icon-class"></div>DualPivotQuicksort</a></li>
<li><a href="../dart_coreimpl/DurationImplementation.html"><div class="icon-class"></div>DurationImplementation</a></li>
<li><a href="../dart_coreimpl/ExceptionImplementation.html"><div class="icon-class"></div>ExceptionImplementation</a></li>
<li><a href="../dart_coreimpl/FutureImpl.html"><div class="icon-class"></div>FutureImpl&lt;T&gt;</a></li>
<li><a href="../dart_coreimpl/HashMapImplementation.html"><div class="icon-class"></div>HashMapImplementation&lt;K, V&gt;</a></li>
<li><a href="../dart_coreimpl/HashSetImplementation.html"><div class="icon-class"></div>HashSetImplementation&lt;E&gt;</a></li>
<li><a href="../dart_coreimpl/HashSetIterator.html"><div class="icon-class"></div>HashSetIterator&lt;E&gt;</a></li>
<li><a href="../dart_coreimpl/ImmutableList.html"><div class="icon-class"></div>ImmutableList&lt;E&gt;</a></li>
<li><a href="../dart_coreimpl/ImmutableMap.html"><div class="icon-class"></div>ImmutableMap&lt;K, V&gt;</a></li>
<li><a href="../dart_coreimpl/JSSyntaxRegExp.html"><div class="icon-class"></div>JSSyntaxRegExp</a></li>
<li><a href="../dart_coreimpl/KeyValuePair.html"><div class="icon-class"></div>KeyValuePair&lt;K, V&gt;</a></li>
<li><a href="../dart_coreimpl/LinkedHashMapImplementation.html"><div class="icon-class"></div>LinkedHashMapImplementation&lt;K, V&gt;</a></li>
<li><a href="../dart_coreimpl/ListFactory.html"><div class="icon-class"></div>ListFactory&lt;E&gt;</a></li>
<li><a href="../dart_coreimpl/ListIterator.html"><div class="icon-class"></div>ListIterator&lt;T&gt;</a></li>
<li><a href="../dart_coreimpl/Maps.html"><div class="icon-class"></div>Maps</a></li>
<li><a href="../dart_coreimpl/MatchImplementation.html"><div class="icon-class"></div>MatchImplementation</a></li>
<li><a href="../dart_coreimpl/NumImplementation.html"><div class="icon-class"></div>NumImplementation</a></li>
<li><a href="../dart_coreimpl/RuntimeOptions.html"><div class="icon-class"></div>RuntimeOptions</a></li>
<li><a href="../dart_coreimpl/SplayTreeMap.html"><div class="icon-class"></div>SplayTreeMap&lt;K, V&gt;</a></li>
<li><a href="../dart_coreimpl/SplayTreeNode.html"><div class="icon-class"></div>SplayTreeNode&lt;K, V&gt;</a></li>
<li><a href="../dart_coreimpl/StopwatchImplementation.html"><div class="icon-class"></div>StopwatchImplementation</a></li>
<li><a href="../dart_coreimpl/StringBase.html"><div class="icon-class"></div>StringBase</a></li>
<li><a href="../dart_coreimpl/StringBufferImpl.html"><div class="icon-class"></div>StringBufferImpl</a></li>
<li><a href="../dart_coreimpl/StringImplementation.html"><div class="icon-class"></div>StringImplementation</a></li>
<li><a href="../dart_coreimpl/TimeZoneImplementation.html"><div class="icon-class"></div>TimeZoneImplementation</a></li>
</ul>
<h2><div class="icon-library"></div><a href="../gl-matrix.html">gl-matrix</a></h2><h2><div class="icon-library"></div><a href="../html.html">html</a></h2></div>
<div class="content">
        <h2>Class
            <strong>DateImplementation</strong></h2>
        
<div class="doc">

</div>
<h3>Implements</h3>
<p>
<span class="type-box"><span class="icon-interface"></span><a href="../dart_core/Date.html">Date</a></span></p>
<h3>Constructors</h3>
<div class="method"><h4 id="DateImplementation">
<span class="show-code">Code</span>
const <strong>DateImplementation</strong>.fromEpoch(value, timeZone) <a class="anchor-link" href="#DateImplementation"
              title="Permalink to DateImplementation.DateImplementation">#</a></h4>
<div class="doc">

<pre class="source">
const DateImplementation.fromEpoch(this.value, this.timeZone);
</pre>
</div>
</div>
<div class="method"><h4 id="DateImplementation">
<span class="show-code">Code</span>
new <strong>DateImplementation</strong>.now() <a class="anchor-link" href="#DateImplementation"
              title="Permalink to DateImplementation.DateImplementation">#</a></h4>
<div class="doc">

<pre class="source">
DateImplementation.now()
    : timeZone = new TimeZone.local(),
      value = _now() {
  _asJs();
}
</pre>
</div>
</div>
<div class="method"><h4 id="DateImplementation">
<span class="show-code">Code</span>
new <strong>DateImplementation</strong>.withTimeZone(<a href="../dart_core/int.html">int</a> years, <a href="../dart_core/int.html">int</a> month, <a href="../dart_core/int.html">int</a> day, <a href="../dart_core/int.html">int</a> hours, <a href="../dart_core/int.html">int</a> minutes, <a href="../dart_core/int.html">int</a> seconds, <a href="../dart_core/int.html">int</a> milliseconds, <a href="../dart_core/TimeZone.html">TimeZone</a> timeZone) <a class="anchor-link" href="#DateImplementation"
              title="Permalink to DateImplementation.DateImplementation">#</a></h4>
<div class="doc">

<pre class="source">
DateImplementation.withTimeZone(int years,
                                int month,
                                int day,
                                int hours,
                                int minutes,
                                int seconds,
                                int milliseconds,
                                TimeZone timeZone)
    : this.timeZone = timeZone,
      value = _valueFromDecomposed(years, month, day,
                                   hours, minutes, seconds, milliseconds,
                                   timeZone.isUtc) {
  if (value === null) throw new IllegalArgumentException();
  _asJs();
}
</pre>
</div>
</div>
<h3>Static Methods</h3>
<div class="method"><h4 id="">
<span class="show-code">Code</span>
<a href="../dart_coreimpl/DateImplementation.html">DateImplementation</a> <strong></strong>(<a href="../dart_core/int.html">int</a> years, <a href="../dart_core/int.html">int</a> month, <a href="../dart_core/int.html">int</a> day, <a href="../dart_core/int.html">int</a> hours, <a href="../dart_core/int.html">int</a> minutes, <a href="../dart_core/int.html">int</a> seconds, <a href="../dart_core/int.html">int</a> milliseconds) <a class="anchor-link" href="#"
              title="Permalink to DateImplementation.">#</a></h4>
<div class="doc">

<pre class="source">
factory DateImplementation(int years,
                           int month,
                           int day,
                           int hours,
                           int minutes,
                           int seconds,
                           int milliseconds) {
  return new DateImplementation.withTimeZone(
      years, month, day,
      hours, minutes, seconds, milliseconds,
      new TimeZoneImplementation.local());
}
</pre>
</div>
</div>
<div class="method"><h4 id="fromString">
<span class="show-code">Code</span>
<a href="../dart_coreimpl/DateImplementation.html">DateImplementation</a> <strong>fromString</strong>(<a href="../dart_core/String.html">String</a> formattedString) <a class="anchor-link" href="#fromString"
              title="Permalink to DateImplementation.fromString">#</a></h4>
<div class="doc">

<pre class="source">
factory DateImplementation.fromString(String formattedString) {
  // Read in (a subset of) ISO 8601.
  // Examples:
  //    - "2012-02-27 13:27:00"
  //    - "2012-02-27 13:27:00.423z"
  //    - "20120227 13:27:00"
  //    - "20120227T132700"
  //    - "20120227"
  //    - "2012-02-27T14Z"
  //    - "-123450101 00:00:00 Z"  // In the year -12345.
  final RegExp re = const RegExp(
      @'^([+-]?\d?\d\d\d\d)-?(\d\d)-?(\d\d)' +  // The day part.
      @'(?:[ T](\d\d)(?::?(\d\d)(?::?(\d\d)(?:.(\d{1,5}))?)?)? ?([zZ])?)?$');
  Match match = re.firstMatch(formattedString);
  if (match !== null) {
    int parseIntOrZero(String matched) {
      // TODO(floitsch): we should not need to test against the empty string.
      if (matched === null || matched == "") return 0;
      return Math.parseInt(matched);
    }

    int years = Math.parseInt(match[1]);
    int month = Math.parseInt(match[2]);
    int day = Math.parseInt(match[3]);
    int hours = parseIntOrZero(match[4]);
    int minutes = parseIntOrZero(match[5]);
    int seconds = parseIntOrZero(match[6]);
    bool addOneMillisecond = false;
    int milliseconds = parseIntOrZero(match[7]);
    if (milliseconds != 0) {
      if (match[7].length == 1) {
        milliseconds *= 100;
      } else if (match[7].length == 2) {
        milliseconds *= 10;
      } else if (match[7].length == 3) {
        // Do nothing.
      } else if (match[7].length == 4) {
        addOneMillisecond = ((milliseconds % 10) &gt;= 5);
        milliseconds ~/= 10;
      } else {
        assert(match[7].length == 5);
        addOneMillisecond = ((milliseconds %100) &gt;= 50);
        milliseconds ~/= 100;
      }
      if (addOneMillisecond &amp;&amp; milliseconds &lt; 999) {
        addOneMillisecond = false;
        milliseconds++;
      }
    }
    // TODO(floitsch): we should not need to test against the empty string.
    bool isUtc = (match[8] !== null) &amp;&amp; (match[8] != "");
    TimeZone timezone = isUtc ? const TimeZone.utc() : new TimeZone.local();
    int epochValue = _valueFromDecomposed(
        years, month, day, hours, minutes, seconds, milliseconds, isUtc);
    if (epochValue === null) {
      throw new IllegalArgumentException(formattedString);
    }
    if (addOneMillisecond) epochValue++;
    return new DateImplementation.fromEpoch(epochValue, timezone);
  } else {
    throw new IllegalArgumentException(formattedString);
  }
}
</pre>
</div>
</div>
<h3>Methods</h3>
<div class="method"><h4 id=":eq">
<span class="show-code">Code</span>
<a href="../dart_core/bool.html">bool</a> <strong>operator ==</strong>(other) <a class="anchor-link" href="#:eq"
              title="Permalink to DateImplementation.operator ==">#</a></h4>
<div class="doc">

<pre class="source">
bool operator ==(other) {
  if (!(other is DateImplementation)) return false;
  return (value == other.value) &amp;&amp; (timeZone == other.timeZone);
}
</pre>
</div>
</div>
<div class="method"><h4 id="add">
<span class="show-code">Code</span>
<a href="../dart_core/Date.html">Date</a> <strong>add</strong>(<a href="../dart_core/Duration.html">Duration</a> duration) <a class="anchor-link" href="#add"
              title="Permalink to DateImplementation.add">#</a></h4>
<div class="doc">

<pre class="source">
Date add(Duration duration) {
  return new DateImplementation.fromEpoch(value + duration.inMilliseconds,
                                          timeZone);
}
</pre>
</div>
</div>
<div class="method"><h4 id="changeTimeZone">
<span class="show-code">Code</span>
<a href="../dart_core/Date.html">Date</a> <strong>changeTimeZone</strong>(<a href="../dart_core/TimeZone.html">TimeZone</a> targetTimeZone) <a class="anchor-link" href="#changeTimeZone"
              title="Permalink to DateImplementation.changeTimeZone">#</a></h4>
<div class="doc">

<pre class="source">
Date changeTimeZone(TimeZone targetTimeZone) {
  if (targetTimeZone == null) {
    targetTimeZone = new TimeZoneImplementation.local();
  }
  return new Date.fromEpoch(value, targetTimeZone);
}
</pre>
</div>
</div>
<div class="method"><h4 id="compareTo">
<span class="show-code">Code</span>
<a href="../dart_core/int.html">int</a> <strong>compareTo</strong>(<a href="../dart_core/Date.html">Date</a> other) <a class="anchor-link" href="#compareTo"
              title="Permalink to DateImplementation.compareTo">#</a></h4>
<div class="doc">

<pre class="source">
int compareTo(Date other) {
  return value.compareTo(other.value);
}
</pre>
</div>
</div>
<div class="method"><h4 id="get:day">
<span class="show-code">Code</span>
<a href="../dart_core/int.html">int</a> <strong>get day</strong>() <a class="anchor-link" href="#get:day"
              title="Permalink to DateImplementation.get day">#</a></h4>
<div class="doc">

<pre class="source">
int get day() native
'''return this.isUtc() ? this._asJs().getUTCDate() :
    this._asJs().getDate();''' {
  isUtc();
  _asJs();
}
</pre>
</div>
</div>
<div class="method"><h4 id="difference">
<span class="show-code">Code</span>
<a href="../dart_core/Duration.html">Duration</a> <strong>difference</strong>(<a href="../dart_core/Date.html">Date</a> other) <a class="anchor-link" href="#difference"
              title="Permalink to DateImplementation.difference">#</a></h4>
<div class="doc">

<pre class="source">
Duration difference(Date other) {
  return new Duration(milliseconds: value - other.value);
}
</pre>
</div>
</div>
<div class="method"><h4 id="get:hours">
<span class="show-code">Code</span>
<a href="../dart_core/int.html">int</a> <strong>get hours</strong>() <a class="anchor-link" href="#get:hours"
              title="Permalink to DateImplementation.get hours">#</a></h4>
<div class="doc">

<pre class="source">
int get hours() native
'''return this.isUtc() ? this._asJs().getUTCHours() :
    this._asJs().getHours();''' {
  isUtc();
  _asJs();
}
</pre>
</div>
</div>
<div class="method"><h4 id="isLocalTime">
<span class="show-code">Code</span>
<a href="../dart_core/bool.html">bool</a> <strong>isLocalTime</strong>() <a class="anchor-link" href="#isLocalTime"
              title="Permalink to DateImplementation.isLocalTime">#</a></h4>
<div class="doc">

<pre class="source">
bool isLocalTime() {
  return !timeZone.isUtc;
}
</pre>
</div>
</div>
<div class="method"><h4 id="isUtc">
<span class="show-code">Code</span>
<a href="../dart_core/bool.html">bool</a> <strong>isUtc</strong>() <a class="anchor-link" href="#isUtc"
              title="Permalink to DateImplementation.isUtc">#</a></h4>
<div class="doc">

<pre class="source">
bool isUtc() {
  return timeZone.isUtc;
}
</pre>
</div>
</div>
<div class="method"><h4 id="get:milliseconds">
<span class="show-code">Code</span>
<a href="../dart_core/int.html">int</a> <strong>get milliseconds</strong>() <a class="anchor-link" href="#get:milliseconds"
              title="Permalink to DateImplementation.get milliseconds">#</a></h4>
<div class="doc">

<pre class="source">
int get milliseconds() native
'''return this.isUtc() ? this._asJs().getUTCMilliseconds() :
  this._asJs().getMilliseconds();''' {
  isUtc();
  _asJs();
}
</pre>
</div>
</div>
<div class="method"><h4 id="get:minutes">
<span class="show-code">Code</span>
<a href="../dart_core/int.html">int</a> <strong>get minutes</strong>() <a class="anchor-link" href="#get:minutes"
              title="Permalink to DateImplementation.get minutes">#</a></h4>
<div class="doc">

<pre class="source">
int get minutes() native
'''return this.isUtc() ? this._asJs().getUTCMinutes() :
    this._asJs().getMinutes();''' {
  isUtc();
  _asJs();
}
</pre>
</div>
</div>
<div class="method"><h4 id="get:month">
<span class="show-code">Code</span>
<a href="../dart_core/int.html">int</a> <strong>get month</strong>() <a class="anchor-link" href="#get:month"
              title="Permalink to DateImplementation.get month">#</a></h4>
<div class="doc">

<pre class="source">
int get month() native
'''return this.isUtc() ? this._asJs().getUTCMonth() + 1 :
    this._asJs().getMonth() + 1;'''  {
  isUtc();
  _asJs();
}
</pre>
</div>
</div>
<div class="method"><h4 id="get:seconds">
<span class="show-code">Code</span>
<a href="../dart_core/int.html">int</a> <strong>get seconds</strong>() <a class="anchor-link" href="#get:seconds"
              title="Permalink to DateImplementation.get seconds">#</a></h4>
<div class="doc">

<pre class="source">
int get seconds() native
'''return this.isUtc() ? this._asJs().getUTCSeconds() :
    this._asJs().getSeconds();''' {
  isUtc();
  _asJs();
}
</pre>
</div>
</div>
<div class="method"><h4 id="subtract">
<span class="show-code">Code</span>
<a href="../dart_core/Date.html">Date</a> <strong>subtract</strong>(<a href="../dart_core/Duration.html">Duration</a> duration) <a class="anchor-link" href="#subtract"
              title="Permalink to DateImplementation.subtract">#</a></h4>
<div class="doc">

<pre class="source">
Date subtract(Duration duration) {
  return new DateImplementation.fromEpoch(value - duration.inMilliseconds,
                                          timeZone);
}
</pre>
</div>
</div>
<div class="method"><h4 id="toString">
<span class="show-code">Code</span>
<a href="../dart_core/String.html">String</a> <strong>toString</strong>() <a class="anchor-link" href="#toString"
              title="Permalink to DateImplementation.toString">#</a></h4>
<div class="doc">

<pre class="source">
String toString() {
  String fourDigits(int n) {
    int absN = n.abs();
    String sign = n &lt; 0 ? "-" : "";
    if (absN &gt;= 1000) return "$n";
    if (absN &gt;= 100) return "${sign}0$absN";
    if (absN &gt;= 10) return "${sign}00$absN";
    if (absN &gt;= 1) return "${sign}000$absN";
  }
  String threeDigits(int n) {
    if (n &gt;= 100) return "${n}";
    if (n &gt; 10) return "0${n}";
    return "00${n}";
  }
  String twoDigits(int n) {
    if (n &gt;= 10) return "${n}";
    return "0${n}";
  }

  String y = fourDigits(year);
  String m = twoDigits(month);
  String d = twoDigits(day);
  String h = twoDigits(hours);
  String min = twoDigits(minutes);
  String sec = twoDigits(seconds);
  String ms = threeDigits(milliseconds);
  if (timeZone.isUtc) {
    return "$y-$m-$d $h:$min:$sec.${ms}Z";
  } else {
    return "$y-$m-$d $h:$min:$sec.$ms";
  }
}
</pre>
</div>
</div>
<div class="method"><h4 id="get:weekday">
<span class="show-code">Code</span>
<a href="../dart_core/int.html">int</a> <strong>get weekday</strong>() <a class="anchor-link" href="#get:weekday"
              title="Permalink to DateImplementation.get weekday">#</a></h4>
<div class="doc">

<pre class="source">
int get weekday() native '''
  var day = this.isUtc() ? this._asJs().getUTCDay() : this._asJs().getDay();
  return (day + 6) % 7;''';
</pre>
</div>
</div>
<div class="method"><h4 id="get:year">
<span class="show-code">Code</span>
<a href="../dart_core/int.html">int</a> <strong>get year</strong>() <a class="anchor-link" href="#get:year"
              title="Permalink to DateImplementation.get year">#</a></h4>
<div class="doc">

<pre class="source">
int get year() native
'''return this.isUtc() ? this._asJs().getUTCFullYear() :
  this._asJs().getFullYear();''' {
  isUtc();
  _asJs();
}
</pre>
</div>
</div>
<h3>Fields</h3>
<div class="field"><h4 id="timeZone">
<span class="show-code">Code</span>
final <a href="../dart_core/TimeZone.html">TimeZone</a>         <strong>timeZone</strong> <a class="anchor-link"
            href="#timeZone"
            title="Permalink to DateImplementation.timeZone">#</a>
        </h4>
        <div class="doc">

<pre class="source">
final TimeZone timeZone;
</pre>
</div>
</div>
<div class="field"><h4 id="value">
<span class="show-code">Code</span>
final <a href="../dart_core/int.html">int</a>         <strong>value</strong> <a class="anchor-link"
            href="#value"
            title="Permalink to DateImplementation.value">#</a>
        </h4>
        <div class="doc">

<pre class="source">
final int value;
</pre>
</div>
</div>
        </div>
        <div class="clear"></div>
        </div>
        
        <div class="footer"></div>
        <script async src="../client-static.js"></script>
        </body></html>
        
